<app-header (toggleSidebarEvent)="toggleSidebar()"></app-header>

<div class="dashboard-container">
  <div class="sidebar" *ngIf="sidebarOpen" (click)="$event.stopPropagation()">
    <div class="sidebar-header">
      <button class="close-sidebar" (click)="closeSidebar()">тЬХ</button>
    </div>

    <ul class="nav-menu">
      <li class="nav-item active">
        <a (click)="navigateToCreditSaving()"><img src="assets/salary.png" /> рдмрдЪрдд рдЬрдорд╛ рдХрд░рдгреЗ</a>
      </li>
      <li class="nav-item">
        <a (click)="navigateToloan()"
          ><img src="assets/home.png" /> рдХрд░реНрдЬрд╛рд╕рд╛рдареА рдЕрд░реНрдЬ</a
        >
      </li>
      <li class="nav-item">
        <a (click)="navigateToLoanConfirm()"
          ><img src="assets/loan.png" /> рдХрд░реНрдЬ рдкреБрд╖реНрдЯреА</a
        >
      </li>
      <li class="nav-item">
        <a (click)="navigateToTransactionHistory()"><img src="assets/document.png" /> рд╡реНрдпрд╡рд╣рд╛рд░ рдЗрддрд┐рд╣рд╛рд╕</a>
      </li>
      <!-- <li class="nav-item">
        <a href="#"><img src="assets/megaphone.png" /> рд╕рдВрд╡рд╛рдж рдЖрдгрд┐ рдкрд╛рд░рджрд░реНрд╢рдХрддрд╛</a>
      </li> -->
      <li class="nav-item">
        <a (click)="navigateToprofile()"
          ><img src="assets/edit.png" /> рдкреНрд░реЛрдлрд╛рдЗрд▓ рдЖрдгрд┐ рдорд╛рд╣рд┐рддреА</a
        >
      </li>
      <li class="nav-item">
        <a (click)="navigateToChangePassword()"
          ><img src="assets/padlock.png" /> рдкрд╛рд╕рд╡рд░реНрдб рдмрджрд▓рд╛</a
        >
      </li>
    </ul>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <section class="member-info">
      <h2>Welcome, {{ member.full_name }}</h2>
      <p>Email: {{ member.email }}</p>
      <p>Contact: {{ member.contact }}</p>
    </section>

    <section class="groups-section">
      <h3>ЁЯУв рдЙрдкрд▓рдмреНрдз рдЧрдЯ</h3>
      <div class="group-list">
        <div *ngFor="let group of groups" class="group-card">
          <h4>{{ group.group_name }}</h4>
          <p><strong>рдЙрджреНрджреЗрд╢:</strong> {{ group.purpose }}</p>
          <p><strong>рдиреЗрддреЗ:</strong> {{ group.leader_name }}</p>
          <p><strong>рд╢рд╣рд░:</strong> {{ group.city }}</p>
          <p><strong>рдЬрд┐рд▓реНрд╣рд╛:</strong> {{ group.district }}</p>

          <p><strong>рд╕рджрд╕реНрдп рдорд░реНрдпрд╛рджрд╛:</strong> {{ group.member_count }}</p>
          <p><strong>рдирд┐рдХрд╖:</strong> {{ group.eligibility_criteria }}</p>
          <p><strong>рдмрдЪрдд:</strong> {{ group.saving_contribution }}</p>
          <p><strong>рд╕рдВрдкрд░реНрдХ:</strong> {{ group.contact_number }}</p>
          <p><strong>рдмрдБрдХ рдирд╛рд╡:</strong> {{ group.bank_name }}</p>
          <p><strong>рдмрдБрдХ рдЦрд╛рддреЗ рдХреНрд░рдорд╛рдВрдХ:</strong> {{ group.bank_account }}</p>
          <p><strong>IFSC рдХреЛрдб:</strong> {{ group.ifsc_code }}</p>

          <button class="join-btn" (click)="openTrustModal(group)">
            рдЧрдЯ рдЬреЙрдИрди рдХрд░рд╛
          </button>
        </div>
      </div>
      <!-- Trust Modal -->
      <div *ngIf="selectedGroup" class="overlay">
        <div class="modal">
          <h2>ЁЯЫбя╕П рд╡рд┐рд╢реНрд╡рд╛рд╕рдкреВрд░реНрд╡рдХ рдирд┐рд╡рдб рдХрд░рд╛</h2>
          <p><strong>рдЧрдЯ рдирд╛рд╡:</strong> {{ selectedGroup.group_name }}</p>
          <p>
            <strong>рд▓рд╛рдпрд╕рдиреНрд╕ рдкреНрд░рдХрд╛рд░:</strong> {{ selectedGroup.license_type }}
          </p>
          <p>
            рдЖрдкрдг <strong>{{ selectedGroup.leader_name }}</strong> рдпрд╛рдВрдЪреНрдпрд╛ рдЧрдЯрд╛рдд
            рд╕рд╛рдореАрд▓ рд╣реЛрдгрд╛рд░ рдЖрд╣рд╛рдд. рдХреГрдкрдпрд╛ рдЦрд╛рддреНрд░реА рдХрд░реВрди рдкреБрдвреЗ рдЬрд╛.
          </p>

          <!-- Trust Terms Section -->
          <div class="trust-terms">
            <h3>рдЕрдЯреА рд╡ рд╢рд░реНрддреА:</h3>
            <ul>
              <li>рд╣рд╛ рдЧрдЯ рдбрд┐рдЬрд┐рдЯрд▓ рдлрд╛рдпрдирд╛рдиреНрд╕рд╕рд╛рдареА рдкреНрд░рдорд╛рдгрд┐рдд рдЖрд╣реЗ.</li>
              <li>рдЖрдкрд▓реА рд╡реИрдпрдХреНрддрд┐рдХ рдорд╛рд╣рд┐рддреА рд╕реБрд░рдХреНрд╖рд┐рдд рдареЗрд╡рд▓реА рдЬрд╛рдИрд▓.</li>
              <li>рд╕рджрд╕реНрдпрддреНрд╡ рдлрдХреНрдд рдЦрд╛рддреНрд░реАрд╢реАрд░ рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░ рд╡рд╛рдкрд░реВрди рджрд┐рд▓реЗ рдЬрд╛рдИрд▓.</li>
              <li>рдХреГрдкрдпрд╛ рдХреЛрдгрддреАрд╣реА рдЖрд░реНрдерд┐рдХ рджреЗрд╡рд╛рдгрдШреЗрд╡рд╛рдг рдХрд░рддрд╛рдирд╛ рд╕рддрд░реНрдХ рд░рд╛рд╣рд╛.</li>
              <li>
                рдпрд╛ рдЧрдЯрд╛рдд рд╕рд╛рдореАрд▓ рдЭрд╛рд▓реНрдпрд╛рдирдВрддрд░, рддреБрдордЪреНрдпрд╛ рдиреЛрдВрджрдгреАрдЪреА рдорд╛рд╣рд┐рддреА рд▓реЙрдЧ рдХреЗрд▓реА рдЬрд╛рдИрд▓.
              </li>
            </ul>
          </div>

          <div class="actions">
            <button (click)="confirmJoinGroup()">рд╣реЛ, рдЧрдЯ рдЬреЙрдИрди рдХрд░рд╛ тЬЕ</button>
            <button (click)="cancelJoin()">рд░рджреНрдж рдХрд░рд╛ тЭМ</button>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>
<app-footer></app-footer>
